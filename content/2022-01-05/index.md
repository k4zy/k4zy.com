---
title: "静かにいなくなったxip.io"
date: "20220105"
tags: ["diary"]
---

`xip.io` という特殊なドメインがありました。これはワイルドカード DNS サーバ(サービス)と呼ばれるもので開発用途で使われます。  
例えば、開発中に外部サービスで認証処理(ログインなど)をしたい場合にリダイレクト先を指定することがありますが、リダイレクト先にローカルの開発サーバーを指定することは通常できません。これはローカルの開発サーバーが DNS で名前解決出来ないことが原因です。それではどうするかというとループバックドメインやワイルドカード DNS サーバを利用して解決します。  
ループバックドメインとはループバックアドレス(127.0.0.1 みたいなの)をドメインとして扱えるサービスです。リダイレクト先に指定するとループバックアドレスを使って開発サーバーに戻ってこれます。  
一方でワイルドカード DNS サーバはループバックアドレスだけでなく、任意の ip アドレスへの名前解決をしてくれます。これがなぜ便利かというとローカルに建てたサーバーにモバイルアプリを繋いでる場合など複数の端末が関わってくる検証にも利用できるためループバックドメインに比べて利用範囲が広いです。その他にはサブドメインをつけた状態でも動くので、サブドメインが特殊な意味を持つ開発環境などでも利用されます。

そんな xip.io なんですが、2021 年の 5 月頃に突然利用できなくなりました。xip.io は Basecamp が運用していましたが当時外部に向けたアナウンスは一切ありませんでした。これ以上は外部の人間による憶測ですが、どうやら[職場内の政治的な発言云々の件](https://jp.techcrunch.com/2021/05/01/2021-04-30-basecamp-employees-quit-ceo-letter/)で開発者が大量に離されてしまった際に担当者もいなくなってしまったのではないかと言われています。数日の間 ネットを騒がせたニュースでしたが、こういう形で自分たちに影響を与えることがあるのかという面白さが不謹慎ながらありました。

一応代替先として`nip.io` があり、同じ振る舞いをしてくれるみたいです。しかしながら外部のループバックドメインやワイルドカード DNS サーバを利用していると、今回みたいに突然使えなくなったりするだけではなく、社外に特定の subdomain が使われている事が知られてしまったり、最悪悪意のあるアドレスに向くようすることも出来るので仕事で使う際は注意が必要です。  
個人開発であればそこまで気にならないですが、仕事でワイルドカード DNS サーバが欲しい場合は`nip.io` の実装が OSS として GitHub で公開されているので、自分たちで運用すると良いと思います。

- [What Happened to Xip.io? | Hacker News](https://news.ycombinator.com/item?id=27202891)
- [exentriquesolutions/nip.io](https://github.com/exentriquesolutions/nip.io)
